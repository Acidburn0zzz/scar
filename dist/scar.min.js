/*! scar v1.3.0 - https://larsjung.de/scar/ */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.scar=n():t.scar=n()}(window,function(){return function(e){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=r,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(n,t){if(1&t&&(n=o(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)o.d(e,r,function(t){return n[t]}.bind(null,r));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=0)}([function(t,n,e){"use strict";var r=e(1);t.exports={Scar:r,test:r().static(),assert:e(11),insp:e(12),spy:e(13),uniq:e(14)}},function(s,t,c){"use strict";(function(e){function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var t=c(3),n=c(5),o=c(6),i=c(10),u=function t(){return Object.assign(Object.create(t.prototype),{tests:[]})};u.prototype={constructor:u,test:function(){this.tests.push(t.apply(void 0,arguments))},skip:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];this.test.apply(this,r(n).concat([{skip:!0}]))},sync:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];this.test.apply(this,r(n).concat([{sync:!0}]))},run:function(t){return t=Object.assign({reporter:o().callback},t),n(this.tests,t).run()},cli:function(t){var n=this;return e.window?new Promise(function(t){e.window.addEventListener("load",function(){return t()})}).then(function(){return i().run(n,t)}):i().run(this,t)},static:function(){return Object.assign(this.test.bind(this),{scar:this,skip:this.skip.bind(this),sync:this.sync.bind(this),run:this.run.bind(this),cli:this.cli.bind(this)})}},s.exports=u}).call(this,c(2))},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){"use strict";var r=e(4),o=r.isString,i=r.isNumber,u=r.isFn,s=r.asFn,c=function t(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];return Object.assign.apply(Object,[Object.create(t.prototype),{desc:"[No Description]",fn:null,skip:!1,sync:!1,timeout:null}].concat(function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(e.map(function(t){return o(t)?{desc:t}:u(t)?{fn:t}:t})),[{status:t.WAITING,err:null,starttime:null,duration:null,promise:null}]))};c.WAITING="WAITING",c.PENDING="PENDING",c.PASSED="PASSED",c.FAILED="FAILED",c.SKIPPED="SKIPPED";c.prototype={constructor:c,__TRACE_MARKER__:function(){return s(this.fn)()},runFn:function(){var t=this,n=Promise.resolve().then(function(){return t.__TRACE_MARKER__()});return i(this.timeout)&&0<this.timeout?Promise.race([n,function(e){return new Promise(function(t,n){setTimeout(function(){return n(new Error("Timeout ("+e+"ms)"))},e)})}(this.timeout)]):n},run:function(){var n=this;return this.promise=this.promise||Promise.resolve().then(function(){return n.starttime=Date.now(),n.status=c.PENDING,n.skip?null:n.runFn()}).then(function(){n.status=n.skip?c.SKIPPED:c.PASSED}).catch(function(t){n.status=c.FAILED,n.err=t}).then(function(){n.duration=Date.now()-n.starttime}),this.promise}},t.exports=c},function(t,n,e){"use strict";var r=function(t){return"number"==typeof t},o=function(t){return"function"==typeof t},i=function(t){return t.reduce(function(t,n){return t.then(n)},Promise.resolve())};t.exports={isBoolean:function(t){return"boolean"==typeof t},isNumber:r,isString:function(t){return"string"==typeof t},isArray:function(t){return Array.isArray(t)},isFn:o,isPlainObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},asFn:function(t){return o(t)?t:function(){return t}},runSequential:i,runConcurrent:function(c,a){return!r(a)||a<2?i(c):new Promise(function(r){var o=c.length,i=0,u=0,s=0;!function t(){for(;s<o&&u<a;){var n=c[s];s+=1,u+=1,(e=n,Promise.resolve().then(e).catch(function(){return null}).then(function(){u-=1,i+=1})).then(t)}var e;i===o&&r()}()})}}},function(t,n,e){"use strict";var r=e(4),o=r.asFn,s=r.runSequential,c=r.runConcurrent,a=e(3),f=function(t){return!!t.sync},l=function(t){return!t.sync},i=function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];return Object.assign(Object.create(t.prototype),{sync:!1,reporter:null,filter:null,maxConcurrent:100},e,{tests:n,status:a.WAITING,starttime:null,duration:null,promise:null})};i.prototype={constructor:i,runTest:function(t){var n=this;return Promise.resolve().then(function(){return o(n.reporter)("beforeTest",n,t)}).then(function(){n.runCount+=1,t.runIdx=n.runCount}).then(function(){return t.run()}).then(function(){n.settledCount+=1,t.settledIdx=n.settledCount,t.status===a.PASSED?(n.passedCount+=1,t.passedIdx=n.passedCount):t.status===a.SKIPPED?(n.skippedCount+=1,t.skippedIdx=n.skippedCount):(n.failedCount+=1,t.failedIdx=n.failedCount)}).then(function(){return o(n.reporter)("afterTest",n,t)})},run:function(){var u=this;return this.promise=this.promise||Promise.resolve().then(function(){u.tests.forEach(function(t,n){t.defIdx=n+1}),u.total=u.tests.length,u.filteredTests=u.tests.filter(o(u.filter||!0)),u.filteredTotal=u.filteredTests.length,u.runCount=0,u.settledCount=0,u.passedCount=0,u.failedCount=0,u.skippedCount=0}).then(function(){return o(u.reporter)("beforeAll",u)}).then(function(){u.starttime=Date.now(),u.status=a.PENDING;var t=function(t){return function(){return u.runTest(t)}},n=u.filteredTests,e=u.sync?n:n.filter(f),r=u.sync?[]:n.filter(l),o=e.map(t),i=r.map(t);return s(o).then(function(){return c(i,u.maxConcurrent)})}).then(function(){u.status=u.failedCount?a.FAILED:a.PASSED,u.duration=Date.now()-u.starttime}).then(function(){return o(u.reporter)("afterAll",u)}).then(function(){return u}),this.promise}},t.exports=i},function(t,n,e){"use strict";t.exports=e(7)},function(t,n,e){"use strict";var r=e(8),o=e(9),i=o.setTitle,u=o.setFavIcon,s=function t(){var n=Object.assign(Object.create(t.prototype),{log:console.log.bind(console),callback:function(){return n.handle.apply(n,arguments)}});return n};s.prototype={constructor:s,handle:function(t){if(0<=["beforeAll","afterTest","afterAll"].indexOf(t)){for(var n=arguments.length,e=Array(1<n?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this[t].apply(this,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(e))}return null},beforeAll:function(t){var n="running ";return t.filteredTotal!==t.total&&(n+=t.filteredTotal+" of "),n+=t.total+" tests\n ",this.log(n),i("running "+t.filteredTotal+" tests..."),u("GREY"),new Promise(function(t){return setTimeout(function(){return t()},100)})},afterTest:function(t,n){var e="PASSED"===n.status?" ok ":"SKIPPED"===n.status?"skip":"FAIL";this.log(" "+e+" "+n.desc)},afterAll:function(t){var e=this;t.tests.filter(function(t){return"FAILED"===t.status}).forEach(function(t){var n=r(t.err);e.log("\n["+t.failedIdx+"] "+t.desc+"\n"+n.format())});var n="\n";t.failedCount&&(n+=t.failedCount+" failed, "),t.skippedCount&&(n+=t.skippedCount+" skipped, "),n+=t.passedCount+" passed ("+t.duration+"ms)",this.log(n),i(n),u(t.failedCount?"RED":"GREEN")}},t.exports=s},function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var c=[{re:/^\s*at\s+(.*?)\s+\((.*?)(?::(\d+))?(?::(\d+))?\)\s*$/,method:1,url:2,line:3,column:4},{re:/^\s*at\s+(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:null,url:1,line:2,column:3},{re:/^(.*?)@(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:1,url:2,line:3,column:4}],u=/__TRACE_MARKER__$|^process\._tickCallback$/,s=function(t){return t.split("\n").map(function(t){return function(t){var n=!0,e=!1,r=void 0;try{for(var o,i=c[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value,s=u.re.exec(t);if(s)return{method:s[u.method]||"",url:s[u.url],basename:s[u.url].replace(/^.*\//,""),line:parseInt(s[u.line],10),column:parseInt(s[u.column],10)}}}catch(t){e=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(e)throw r}}return null}(t)}).filter(function(t){return t})},r=function(t,n){return n+t.replace(/\n/g,"\n"+n)},o=function t(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=Object.assign.apply(Object,[Object.create(t.prototype),{name:"Err",message:"[no message]",stack:(new Error).stack,drop:0}].concat(i(e.map(function(t){if("string"==typeof t)return{message:t};if("number"==typeof t)return{drop:t};if(t){for(var n={error:t},e=["name","message","stack","drop"].concat(i(Object.keys(t))),r=0;r<e.length;r++){var o=e[r];void 0!==t[o]&&(n[o]=t[o])}return n}return null}))));return o.frames=s(o.stack),o.filteredFrames=function(t,n){t=t.slice(Number(n)||0);var e=!1;return t.filter(function(t){return!(e=e||u.test(t.method))})}(o.frames,o.drop),o};o.prototype=Object.assign(Object.create(Error.prototype),{constructor:o,format:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=this.name+": "+this.message+"\n";return e+=r(function(t,n){return t.map(function(t){return function(t,n){var e=[n?t.basename:t.url,t.line,t.column].filter(function(t){return t}).join(":");return t.method?t.method+" - "+e:e}(t,n)}).join("\n")}(this.filteredFrames,n),"  at "),r(e,t)},toString:function(){return this.format()}}),t.exports=o},function(a,t,n){"use strict";(function(t){var r,o,n,i,e=function(){return null},u=t.window&&t.window.document,s=u?function(t){u.title=t}:e,c=u?(r=u.querySelector("head"),o="shortcut icon",i={RED:(n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wsZER*AAAAAElFTkSuQmCC").replace("*","Y0VbWlewAAAB1JREFUOMtj/OJs9p+BAsDEQCEYNWDUgFEDBosBABZOAow9yV0y"),GREEN:n.replace("*","kM+i8BKgAAAB1JREFUOMtj9Fkf8J+BAsDEQCEYNWDUgFEDBosBAIuhAmqCXURi"),GREY:n.replace("*","kjUf48cwAAAB1JREFUOMtjDA0N/c9AAWBioBCMGjBqwKgBg8UAAFduAh79mcom")},function(t){var n=u.querySelector('link[rel="'+o+'"]');n&&r.removeChild(n);var e=u.createElement("link");e.rel=o,e.href=i.hasOwnProperty(t)?i[t]:t,r.appendChild(e)}):e;a.exports={setTitle:s,setFavIcon:c}}).call(this,n(2))},function(n,t,e){"use strict";(function(o){var i=e(8),t=function t(){return Object.assign(Object.create(t.prototype),{log:console.log.bind(console)})};t.prototype={constructor:t,getArgs:function(){return o.process?o.process.argv.slice(2):o.window?o.window.location.href.split(/[\?&]+/).slice(1):[]},parseArgs:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getArgs();return{showHelp:0<=t.indexOf("-h"),showStats:0<=t.indexOf("-s"),filters:t.filter(function(t){return 0<t.length&&"-"!==t[0]})}},run:function(n,e){var r=this;return Promise.resolve().then(function(){var t=r.parseArgs();if(t.showHelp)r.log("\n  scar - a test runner for node and the browser\n\n  Usage:\n    node tests.js [opt...] [arg...]\n    tests.html?opt&...&arg&...\n\n  Options:\n    -h: show this help message\n    -s: show test stats\n\n  Arguments:\n    all arguments are used as test filters\n\n");else{if(!t.showStats)return e=Object.assign({},e,{filter:function(t){return t&&t.length?function(n){return t.every(function(t){return 0<=n.desc.indexOf(t)})}:null}(t.filters)}),n.run(e).then(function(t){o.process&&t.failedCount&&o.process.exit(1)}).catch(function(t){r.log("\n"+i(t).format("  ")+"\n"),o.process&&o.process.exit(2)});r.log("\n  "+n.tests.length+" tests defined\n \n")}return null})}},n.exports=t}).call(this,e(2))},function(t,n,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=e(12),r=e(8),u=function(t){return Object.prototype.toString.call(t)},s=function e(r,o){if(r===o||Number.isNaN(r)&&Number.isNaN(o))return!0;var t=void 0===r?"undefined":i(r);if("object"!==t&&t===(void 0===o?"undefined":i(o)))return r===o;if((t=u(r))!==u(o))return!1;if("[object Array]"===t)return r.length===o.length&&r.every(function(t,n){return e(r[n],o[n])});if("[object Object]"!==t)return!1;var n=Object.keys(r);return e(n.sort(),Object.keys(o).sort())&&n.every(function(t){return e(r[t],o[t])})},c=function(t,n,e,r){return t?void 0===e?null:e instanceof RegExp?(n=String(n),e.test(n)?null:{act:n,exp:e,msg:r||"expected error "+o(n)+" to be matched by "+o(e)}):"function"==typeof e?(e(n),null):n===e?null:{act:n,exp:e,msg:r||"expected error "+o(n)+" to be "+o(e)}:{act:n,exp:e,msg:r||"expected error but returned "+n}},a=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;if(t&&!t.expr)throw r(t.msg,t,n)},f=function(t,n){a({expr:t,msg:n})};f.fail=function(t){a({msg:t})},f.ok=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"expected "+o(t)+" to be truthy";a({expr:!!t,act:t,msg:n})},f.notOk=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"expected "+o(t)+" to be falsy";a({expr:!t,act:t,msg:n})},f.equal=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"expected "+o(t)+" to equal "+o(n);a({expr:t===n,act:t,exp:n,msg:e})},f.notEqual=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"expected "+o(t)+" not to equal "+o(n);a({expr:t!==n,act:t,ref:n,msg:e})},f.deepEqual=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"expected "+o(t)+" to deeply equal "+o(n);a({expr:s(t,n),act:t,exp:n,msg:e})},f.notDeepEqual=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"expected "+o(t)+" not to deeply equal "+o(n);a({expr:!s(t,n),act:t,ref:n,msg:e})},f.throws=function(t,n,e){a({expr:"function"==typeof t,msg:"assert.throws(): first arg must be a function"});var r={},o=r;try{o=t()}catch(t){a(c(!0,t,n,e))}o!==r&&a(c(!1,o,n,e))},f.rejects=function(t,n,e){return a({expr:t&&"function"==typeof t.then,msg:"assert.rejects(): first arg must be a thenable"}),Promise.resolve(t).then(function(t){return a(c(!1,t,n,e),2)},function(t){return a(c(!0,t,n,e),2)})},t.exports=f},function(t,n,e){"use strict";var r=e(4),o=r.isString,i=r.isFn,u=r.isArray,s=r.isPlainObject;t.exports=function n(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return r.includes(e)?"[circular]":(r.push(e),o(e)?"'"+e+"'":i(e)?String(e).split(")")[0]+")":u(e)?"["+Array.from(e,function(t){return n(t,r)}).join(", ")+"]":s(e)?"{"+Object.keys(e).map(function(t){return t+": "+n(e[t],r)}).join(", ")+"}":String(e))}},function(t,n,e){"use strict";var r=e(4).asFn;t.exports=function(n){var e=[];function t(){var t={idx:e.length,time:Date.now(),ctx:this,args:Array.from(arguments)};return e.push(t),t.ret=r(n)(t,e),t.done=Date.now(),t.ret}return t.calls=e,t}},function(t,n,e){"use strict";var r=new RegExp("^UNIQ-\\d{4}-ID$"),o=0,i=function(){return"UNIQ-"+("0000"+(o+=1)).substr(-4)+"-ID"};t.exports={id:i,isId:function(t){return r.test(t)},obj:function(){return{_uniq_id:i()}},path:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return"_uniq_path/"+i()+t}}}])});