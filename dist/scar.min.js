/*! scar v0.16.5 - https://larsjung.de/scar/ */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.scar=n():t.scar=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";var r=e(1);t.exports={Scar:r,test:r().static(),assert:e(10),insp:e(11),spy:e(12),uniq:e(13)}},function(t,n,e){(function(n){"use strict";var r=e(2),o=e(4),i=e(5),s=e(9),u=function t(){return Object.assign(Object.create(t.prototype),{tests:[]})};u.prototype={constructor:u,test:function(){this.tests.push(r.apply(void 0,arguments))},skip:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];this.test.apply(this,n.concat([{skip:!0}]))},sync:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];this.test.apply(this,n.concat([{sync:!0}]))},run:function(t){return t=Object.assign({reporter:i().callback},t),o(this.tests,t).run()},cli:function(t){var e=this;return n.window?new Promise(function(t){n.window.addEventListener("load",function(){return t()})}).then(function(){return s().run(e,t)}):s().run(this,t)},static:function(){return Object.assign(this.test.bind(this),{scar:this,skip:this.skip.bind(this),sync:this.sync.bind(this),run:this.run.bind(this),cli:this.cli.bind(this)})}},t.exports=u}).call(n,function(){return this}())},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var o=e(3),i=o.isString,s=o.isNumber,u=o.isFn,c=o.asFn,a=function t(){for(var n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];return Object.assign.apply(Object,[Object.create(t.prototype),{desc:"[No Description]",fn:null,skip:!1,sync:!1,timeout:null}].concat(r(e.map(function(t){return i(t)?{desc:t}:u(t)?{fn:t}:t})),[{status:t.WAITING,err:null,starttime:null,duration:null,promise:null}]))};a.WAITING="WAITING",a.PENDING="PENDING",a.PASSED="PASSED",a.FAILED="FAILED",a.SKIPPED="SKIPPED";var f=function(t){return new Promise(function(n,e){setTimeout(function(){return e(new Error("Timeout ("+t+"ms)"))},t)})};a.prototype={constructor:a,__TRACE_MARKER__:function(){return c(this.fn)()},runFn:function(){var t=this,n=Promise.resolve().then(function(){return t.__TRACE_MARKER__()});return s(this.timeout)&&this.timeout>0?Promise.race([n,f(this.timeout)]):n},run:function(){var t=this;return this.promise=this.promise||Promise.resolve().then(function(){return t.starttime=Date.now(),t.status=a.PENDING,t.skip?null:t.runFn()}).then(function(){t.status=t.skip?a.SKIPPED:a.PASSED}).catch(function(n){t.status=a.FAILED,t.err=n}).then(function(){t.duration=Date.now()-t.starttime}),this.promise}},t.exports=a},function(t,n){"use strict";var e=function(t){return"boolean"==typeof t},r=function(t){return"number"==typeof t},o=function(t){return"string"==typeof t},i=function(t){return Array.isArray(t)},s=function(t){return"function"==typeof t},u=function(t){return s(t)?t:function(){return t}},c=function(t){return"[object Object]"===Object.prototype.toString.call(t)},a=function(t){return t.reduce(function(t,n){return t.then(n)},Promise.resolve())},f=function(t,n){return!r(n)||n<2?a(t):new Promise(function(e){var r=t.length,o=0,i=0,s=0,u=function(t){return Promise.resolve().then(t).catch(function(){return null}).then(function(){i-=1,o+=1})},c=function c(){for(;s<r&&i<n;){var a=t[s];s+=1,i+=1,u(a).then(c)}o===r&&e()};c()})};t.exports={isBoolean:e,isNumber:r,isString:o,isArray:i,isFn:s,isPlainObject:c,asFn:u,runSequential:a,runConcurrent:f}},function(t,n,e){"use strict";var r=e(3),o=r.asFn,i=r.runSequential,s=r.runConcurrent,u=e(2),c=function(t){return!!t.sync},a=function(t){return!t.sync},f=function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e=arguments[1];return Object.assign(Object.create(t.prototype),{sync:!1,reporter:null,filter:null,maxConcurrent:100},e,{tests:n,status:u.WAITING,starttime:null,duration:null,promise:null})};f.prototype={constructor:f,runTest:function(t){var n=this;return Promise.resolve().then(function(){return o(n.reporter)("beforeTest",n,t)}).then(function(){n.runCount+=1,t.runIdx=n.runCount}).then(function(){return t.run()}).then(function(){n.settledCount+=1,t.settledIdx=n.settledCount,t.status===u.PASSED?(n.passedCount+=1,t.passedIdx=n.passedCount):t.status===u.SKIPPED?(n.skippedCount+=1,t.skippedIdx=n.skippedCount):(n.failedCount+=1,t.failedIdx=n.failedCount)}).then(function(){return o(n.reporter)("afterTest",n,t)})},run:function(){var t=this;return this.promise=this.promise||Promise.resolve().then(function(){t.tests.forEach(function(t,n){t.defIdx=n+1}),t.total=t.tests.length,t.filteredTests=t.tests.filter(o(t.filter||!0)),t.filteredTotal=t.filteredTests.length,t.runCount=0,t.settledCount=0,t.passedCount=0,t.failedCount=0,t.skippedCount=0}).then(function(){return o(t.reporter)("beforeAll",t)}).then(function(){t.starttime=Date.now(),t.status=u.PENDING;var n=function(n){return function(){return t.runTest(n)}},e=t.filteredTests,r=t.sync?e:e.filter(c),o=t.sync?[]:e.filter(a),f=r.map(n),l=o.map(n);return i(f).then(function(){return s(l,t.maxConcurrent)})}).then(function(){t.status=t.failedCount?u.FAILED:u.PASSED,t.duration=Date.now()-t.starttime}).then(function(){return o(t.reporter)("afterAll",t)}).then(function(){return t}),this.promise}},t.exports=f},function(t,n,e){"use strict";t.exports=e(6)},function(t,n,e){"use strict";var r=e(7),o=e(8),i=o.setTitle,s=o.setFavIcon,u=function t(){var n=Object.assign(Object.create(t.prototype),{log:console.log.bind(console),callback:function(){return n.handle.apply(n,arguments)}});return n};u.prototype={constructor:u,handle:function(t){if(["beforeAll","afterTest","afterAll"].indexOf(t)>=0){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this[t].apply(this,e)}return null},beforeAll:function(t){var n="running ";return t.filteredTotal!==t.total&&(n+=t.filteredTotal+" of "),n+=t.total+" tests\n ",this.log(n),i("running "+t.filteredTotal+" tests..."),s("GREY"),new Promise(function(t){return setTimeout(function(){return t()},100)})},afterTest:function(t,n){var e="PASSED"===n.status?" ok ":"SKIPPED"===n.status?"skip":"FAIL";this.log(" "+e+" "+n.desc)},afterAll:function(t){var n=this;t.tests.filter(function(t){return"FAILED"===t.status}).forEach(function(t){var e=r(t.err);n.log("\n["+t.failedIdx+"] "+t.desc+"\n"+e.format())});var e="\n";t.failedCount&&(e+=t.failedCount+" failed, "),t.skippedCount&&(e+=t.skippedCount+" skipped, "),e+=t.passedCount+" passed ("+t.duration+"ms)",this.log(e),i(e),s(t.failedCount?"RED":"GREEN")}},t.exports=u},function(t,n){"use strict";function e(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var r=[{re:/^\s*at\s+(.*?)\s+\((.*?)(?::(\d+))?(?::(\d+))?\)\s*$/,method:1,url:2,line:3,column:4},{re:/^\s*at\s+(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:null,url:1,line:2,column:3},{re:/^(.*?)@(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:1,url:2,line:3,column:4}],o=/__TRACE_MARKER__$|^process\._tickCallback$/,i=function(t){var n=!0,e=!1,o=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,c=u.re.exec(t);if(c)return{method:c[u.method]||"",url:c[u.url],basename:c[u.url].replace(/^.*\//,""),line:parseInt(c[u.line],10),column:parseInt(c[u.column],10)}}}catch(t){e=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(e)throw o}}return null},s=function(t){var n=t.split("\n");return n.map(function(t){return i(t)}).filter(function(t){return t})},u=function(t,n){t=t.slice(Number(n)||0);var e=!1;return t.filter(function(t){return e=e||o.test(t.method),!e})},c=function(t,n){var e=[n?t.basename:t.url,t.line,t.column].filter(function(t){return t}).join(":");return t.method?t.method+" - "+e:e},a=function(t,n){return t.map(function(t){return c(t,n)}).join("\n")},f=function(t,n){return n+t.replace(/\n/g,"\n"+n)},l=function t(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=Object.assign.apply(Object,[Object.create(t.prototype),{name:"Err",message:"[no message]",stack:(new Error).stack,drop:0}].concat(e(r.map(function(t){if("string"==typeof t)return{message:t};if("number"==typeof t)return{drop:t};if(t){for(var n={error:t},r=["name","message","stack","drop"].concat(e(Object.keys(t))),o=0;o<r.length;o++){var i=r[o];void 0!==t[i]&&(n[i]=t[i])}return n}return null}))));return i.frames=s(i.stack),i.filteredFrames=u(i.frames,i.drop),i};l.prototype=Object.assign(Object.create(Error.prototype),{constructor:l,format:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=arguments.length<=1||void 0===arguments[1]||arguments[1],e=this.name+": "+this.message+"\n";return e+=f(a(this.filteredFrames,n),"  at "),f(e,t)},toString:function(){return this.format()}}),t.exports=l},function(t,n){(function(n){"use strict";var e=function(){return null},r=n.window&&n.window.document,o=r?function(t){r.title=t}:e,i=r?function(){var t=r.querySelector("head"),n="shortcut icon",e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wsZER*AAAAAElFTkSuQmCC",o={RED:e.replace("*","Y0VbWlewAAAB1JREFUOMtj/OJs9p+BAsDEQCEYNWDUgFEDBosBABZOAow9yV0y"),GREEN:e.replace("*","kM+i8BKgAAAB1JREFUOMtj9Fkf8J+BAsDEQCEYNWDUgFEDBosBAIuhAmqCXURi"),GREY:e.replace("*","kjUf48cwAAAB1JREFUOMtjDA0N/c9AAWBioBCMGjBqwKgBg8UAAFduAh79mcom")};return function(e){var i=r.querySelector('link[rel="'+n+'"]');i&&t.removeChild(i);var s=r.createElement("link");s.rel=n,s.href=o.hasOwnProperty(e)?o[e]:e,t.appendChild(s)}}():e;t.exports={setTitle:o,setFavIcon:i}}).call(n,function(){return this}())},function(t,n,e){(function(n){"use strict";var r=e(7),o="\n  scar - a test runner for node and the browser\n\n  Usage:\n    node tests.js [opt...] [arg...]\n    tests.html?opt&...&arg&...\n\n  Options:\n    -h: show this help message\n    -s: show test stats\n\n  Arguments:\n    all arguments are used as test filters\n\n",i=function(t){return t&&t.length?function(n){return t.every(function(t){return n.desc.indexOf(t)>=0})}:null},s=function t(){return Object.assign(Object.create(t.prototype),{log:console.log.bind(console)})};s.prototype={constructor:s,getArgs:function(){return n.process?n.process.argv.slice(2):n.window?n.window.location.href.split(/[\?&]+/).slice(1):[]},parseArgs:function(){var t=arguments.length<=0||void 0===arguments[0]?this.getArgs():arguments[0];return{showHelp:t.indexOf("-h")>=0,showStats:t.indexOf("-s")>=0,filters:t.filter(function(t){return t.length>0&&"-"!==t[0]})}},run:function(t,e){var s=this;return Promise.resolve().then(function(){var u=s.parseArgs();if(u.showHelp)s.log(o);else{if(!u.showStats)return e=Object.assign({},e,{filter:i(u.filters)}),t.run(e).then(function(t){n.process&&t.failedCount&&n.process.exit(1)}).catch(function(t){s.log("\n"+r(t).format("  ")+"\n"),n.process&&n.process.exit(2)});s.log("\n  "+t.tests.length+" tests defined\n \n")}return null})}},t.exports=s}).call(n,function(){return this}())},function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=e(11),i=e(7),s=function(t){return Object.prototype.toString.call(t)},u=function t(n,e){if(n===e||Number.isNaN(n)&&Number.isNaN(e))return!0;var o="undefined"==typeof n?"undefined":r(n);if("object"!==o&&o===("undefined"==typeof e?"undefined":r(e)))return n===e;if(o=s(n),o!==s(e))return!1;if("[object Array]"===o)return n.length===e.length&&n.every(function(r,o){return t(n[o],e[o])});if("[object Object]"===o){var i=Object.keys(n);return t(i.sort(),Object.keys(e).sort())&&i.every(function(r){return t(n[r],e[r])})}return!1},c=function(t,n,e,r){return t?void 0===e?null:e instanceof RegExp?(n=String(n),e.test(n)?null:{act:n,exp:e,msg:r||"expected error "+o(n)+" to be matched by "+o(e)}):"function"==typeof e?(e(n),null):n===e?null:{act:n,exp:e,msg:r||"expected error "+o(n)+" to be "+o(e)}:{act:n,exp:e,msg:r||"expected error but returned "+n}},a=function(t){var n=arguments.length<=1||void 0===arguments[1]?3:arguments[1];if(t&&!t.expr)throw i(t.msg,t,n)},f=function(t,n){a({expr:t,msg:n})};f.fail=function(t){a({msg:t})},f.ok=function(t){var n=arguments.length<=1||void 0===arguments[1]?"expected "+o(t)+" to be truthy":arguments[1];a({expr:!!t,act:t,msg:n})},f.notOk=function(t){var n=arguments.length<=1||void 0===arguments[1]?"expected "+o(t)+" to be falsy":arguments[1];a({expr:!t,act:t,msg:n})},f.equal=function(t,n){var e=arguments.length<=2||void 0===arguments[2]?"expected "+o(t)+" to equal "+o(n):arguments[2];a({expr:t===n,act:t,exp:n,msg:e})},f.notEqual=function(t,n){var e=arguments.length<=2||void 0===arguments[2]?"expected "+o(t)+" not to equal "+o(n):arguments[2];a({expr:t!==n,act:t,ref:n,msg:e})},f.deepEqual=function(t,n){var e=arguments.length<=2||void 0===arguments[2]?"expected "+o(t)+" to deeply equal "+o(n):arguments[2];a({expr:u(t,n),act:t,exp:n,msg:e})},f.notDeepEqual=function(t,n){var e=arguments.length<=2||void 0===arguments[2]?"expected "+o(t)+" not to deeply equal "+o(n):arguments[2];a({expr:!u(t,n),act:t,ref:n,msg:e})},f.throws=function(t,n,e){a({expr:"function"==typeof t,msg:"assert.throws(): first arg must be a function"});var r={},o=r;try{o=t()}catch(t){a(c(!0,t,n,e))}o!==r&&a(c(!1,o,n,e))},f.rejects=function(t,n,e){return a({expr:t&&"function"==typeof t.then,msg:"assert.rejects(): first arg must be a thenable"}),Promise.resolve(t).then(function(t){return a(c(!1,t,n,e),2)},function(t){return a(c(!0,t,n,e),2)})},t.exports=f},function(t,n,e){"use strict";var r=e(3),o=r.isString,i=r.isFn,s=r.isArray,u=r.isPlainObject,c=function t(n){return o(n)?"'"+n+"'":i(n)?String(n).split(")")[0]+")":s(n)?"["+Array.from(n,function(n){return t(n)}).join(", ")+"]":u(n)?"{"+Object.keys(n).map(function(e){return e+": "+t(n[e])}).join(", ")+"}":String(n)};t.exports=c},function(t,n,e){"use strict";var r=e(3),o=r.asFn,i=function(t){function n(){var n={idx:e.length,time:Date.now(),ctx:this,args:Array.from(arguments)};return e.push(n),n.ret=o(t)(n,e),n.done=Date.now(),n.ret}var e=[];return n.calls=e,n};t.exports=i},function(t,n){"use strict";var e="UNIQ-",r="-ID",o=4,i="0000",s=new RegExp("^"+e+"\\d{"+o+"}"+r+"$"),u=0,c=function(){return u+=1,e+(i+u).substr(-o)+r},a=function(t){return s.test(t)},f=function(){return{_uniq_id:c()}},l=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return"_uniq_path/"+c()+t};t.exports={id:c,isId:a,obj:f,path:l}}])});